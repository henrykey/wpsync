<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>智汇仓设置</title>
  <link rel="stylesheet" href="../vendor/css/photon.css" media="screen" charset="utf-8">
  <link rel="stylesheet" href="./index.css" media="screen" charset="utf-8">
  <script src="../js/jQuery-2.1.4.min.js"></script>
  <!--<script charset="utf-8">require('./settings')</script>-->
  <script>
    //加载香港模块
    const {ipcRenderer, shell} = require('electron');
    var _conf;
    ipcRenderer.on('getconf', function (event, conf) {
      _conf = conf;
      $("#user").val(_conf.user);
      $("#localDir").val(_conf.localDir);
      $("#wpaddr").val(_conf.wpaddr);
      $("input[name=synctype][value=" + _conf.synctype + "]").prop("checked", "checked");
      //$("input[name=synctype][value="+conf.synctype+"]").;

      console.log(JSON.stringify(_conf));
    });
    ipcRenderer.on('saveconf', function (event, message) {
      console.log(message);
    });
    $(document).ready(function () {
      ipcRenderer.send('getconf', 'getconf...');
    });
    function saveconfig() {
       _conf.user=$("#user").val();
       _conf.passwd=$("#passwd").val();
       _conf.synctype=$("input[name=synctype]:checked").val();
       _conf.localDir=$("#localDir").val();
       _conf.wpaddr=$("#wpaddr").val();      
      ipcRenderer.send('saveconf', _conf);
    };
    function closewin(){
      ipcRenderer.send('closeconf');
    }
  </script>
</head>

<body>
    <div class="window">
      <header class="toolbar toolbar-header">
        <h1 class="title">智汇仓设置</h1>
      </header>

    <div class="tab-group">
      <div class="tab-item active">
        <span class="icon icon-cancel icon-close-tab"></span>
        设置
      </div>
      <div class="tab-item">
        <span class="icon icon-cancel icon-close-tab"></span>
        关于
      </div>
    </div>
    <form class="tgroup-setting">
      <div class="wp-group">
        <div class="group-title"><strong>用户信息</strong></div>
        <div class="form-group group-label">
          <span>账号</span>
          <input style="width:70%;padding:0px" class="form-control" id="user" >
</div>
<div class="form-group group-label">
  <span>密码</span>
  <input style="width:70%;padding:0px" type="password" class="form-control" placeholder="Password" id="passwd">
</div>
</div>
<div class="wp-group">
  <div class="group-title"><strong>同步模式</strong></div>
  <div class="radio group-label">
    <label>
        <input type="radio" name="synctype" value="1"> 双向
      </label>
  </div>
  <div class="radio group-label">
    <label>
        <input type="radio" name="synctype" value="2">
        本地镜像（上传本地数据）
      </label>
  </div>
  <div class="radio group-label">
    <label>
        <input type="radio" name="synctype" value="3">
        云端镜像（下载云端数据）
      </label>
  </div>
</div>
<div class="wp-group">
  <div class="group-title"><strong>同步信息</strong></div>
  <div class="form-group group-label">
    <span>同步文件夹</span>
    <input style="width:70%;padding:0px" class="form-control" id="localDir">
</div>
<div class="form-group group-label">
  <span>智汇仓网址</span>
  <input style="width:70%;padding:0px" class="form-control" id="wpaddr">
</div>
</div>
<div class="information">
  <div class="form-actions">
    <button type="button" class="btn btn-form btn-default" onclick="javascript:closewin();">取消</button>
<button type="button" class="btn btn-form btn-primary" onclick="javascript:saveconfig();">确认</button>
</div>
</div>
</form>
</div>

</body>

</html>